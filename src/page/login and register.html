<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login </title>
    <link rel="stylesheet" href="/Discord-OOP-Frontend/src/style/style-login.css">
</head>
<body>
<!-- this is login -->

    <div class="box_login">
        <div class="position">
            <form class="container_login" id="container_login">
                <div class="centering-wrapper">
                    <div class="section1 text-center">
                        <div class="primary-header">Welcome back!</div>
                        <div class="secondary-header">We're so excited to see you again!</div>
                        <div class="input-position">
                            <div class="form-group">
                                <h5 class="input-placeholder" id="email-txt">Email<span class="error-message"
                                        id="email-error"></span></h5>
                                <input type="email" required="true" name="logemail" class="form-style" id="logemail"
                                    autocomplete="off" style="margin-bottom: 20px;">
                                <i class="input-icon uil uil-at"></i>
                            </div>
                            <div class="form-group">
                                <h5 class="input-placeholder" id="pword-txt">Password<span class="error-message"
                                        id="password-error"></span></h5>
                                <input type="password" required="true" name="logpass" class="form-style" id="logpass"
                                    autocomplete="on">
                                <i class="input-icon uil uil-lock-alt"></i>
                            </div>
                        </div>
                        <div class="password-container">
                            <a href="#" class="link">Forgot your password?</a>
                        </div>
                        <div class="btn-position">
                            <button href="#" class="btn">login</button>
                        </div>
                        <!-- <div class="password-containerr"> -->
                            <p class="nonlink">Need an account? <a href="#" class="btn_toggle" onclick="showRegisterForm()" style="text-decoration: none;" > register</a></p>
                        <!-- </div> -->
                    </div>
                    <div class="horizontalSeparator"></div>
                    <div class="qr-login">
                        <div class="qr-container">
                            <img class="logo"
                                src="assets/images/qrcode.png" />
                            <canvas id="qr-code"></canvas>
                        </div>
                        <div class="qr-pheader">Log in with QR Code</div>
                        <div class="qr-sheader">Scan this with the <strong>scanner app </strong>to log in instantly.</div>
                        
                    </div>
                </div>
            </form>
            <!-- ----- -->
            <form class="container_register" id="container_register" style="display:none">
                <div class="centering-wrapper">
                    <div class="section2 text-center">
                        <div class="primary-header">Create New User</div>
                        <div class="input-position">
                            <!-- -------------------------------------------------------------------------------------- -->
                            <div class="form-group">
                                <h5 class="input-placeholder" id="email-txt">Email<span class="error-message" id="email-error"></span></h5>
                                <input type="email" required="true" name="logemail" class="form-style" id="logemail"
                                    autocomplete="off" style="margin-bottom: 20px;">
                                <i class="input-icon uil uil-at"></i>
                            </div>
                            <!-- -------------------------------------------------------------------------------------- -->
                            <div class="form-group">
                                <h5 class="input-placeholder" id="username-txt">Username<span class="error-message" id="email-error"></span></h5>
                                <input required="true" name="username" class="form-style" id="logemail"
                                    autocomplete="off" style="margin-bottom: 20px;">
                                <i class="input-icon uil uil-at"></i>
                            </div>
                            <!-- -------------------------------------------------------------------------------------- -->
                            <div class="form-group">
                                <h5 class="input-placeholder" id="pword-txt">Password<span class="error-message" id="password-error"></span></h5>
                                <input type="password" required="true" name="logpass" class="form-style" id="logpass"
                                    autocomplete="on">
                                <i class="input-icon uil uil-lock-alt"></i>
                            </div>
                            <!-- -------------------------------------------------------------------------------------- -->
                            <div class="form-group">
                                <div class="day-form">
                                    <h5 class="input-placeholder" id="bday-txt"> Birth day  </h5>
                                    <input type="date" name="" id="">
                                </div>
                            </div>
                            <!-- -------------------------------------------------------------------------------------- -->
                            <!-- <div class="check-receive-email">
                                <input type="checkbox" name="" id="">
                                <label for="checkbox-lb">Receive email from us</label>
                            </div> -->
                        
                        </div>
                        <div class="btn-position">
                            <button href="#" class="btn-resgister">register</button>
                            <a href="#" onclick="showLoginForm()" class="btn_toggle"> you have an account? </a>
                        </div>
                    </div>
                </div>
            </form>
        
        </div>
    </div>

    <script>
        function showLoginForm() {
            document.getElementById('container_login').style.display = 'block';
            document.getElementById('container_register').style.display = 'none';
        }

        function showRegisterForm() {
            document.getElementById('container_login').style.display = 'none';
            document.getElementById('container_register').style.display = 'block';
        }

        // fetch api 
        const form_login = document.getElementById('container_login');
        form_login.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('email-txt').value;
            const username = document.getElementById('username-txt').value;
            const data = {
                email,
                password
            }
            fetch('http://127.0.0.1:8000/account/login', {
                method: 'POST',
                headers: {
                    'Content-Type': '/Discord-OOP-Frontend/src/page/login and register.html'
                },
                body: JSON.stringify(data)
            }) 
                .then(res => res.json())
                .then(data => {
                    console.log(data);
                })
                .catch(err => {
                    console.log(err);
                })
        })
        
        const form_register = document.getElementById('container_register');
        form_register.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('email-txt').value;
            const username = document.getElementById('username-txt').value;
            const password = document.getElementById('pword-txt').value;
            const data = {
                email,
                username,
                password
            }
            fetch('http://127.0.0.1:8000/account/register', {
                method: 'POST',
                headers: {
                    'Content-Type': '/Discord-OOP-Frontend/src/page/login and register.html'
                },
                body: JSON.stringify(data)
            }) 
                .then(res => res.json())
                .then(data => {
                    console.log(data);
                })
                .catch(err => {
                    console.log(err);
                })
        })


    </script>

</body>
</html>